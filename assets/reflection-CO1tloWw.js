import{r as u,j as e,a as v,b as k,L as z}from"./index-CQHjorcH.js";import{A as w}from"./AttributionBlog-Dju1FV7y.js";import{L as P,a as E,b as _,M as p,n as G,c as H,z as c,T as W,O,A as D,d as V,N as X,f as M,e as Y,F as Z,g as q,u as U,h as L,S as J,C as F,i as K}from"./useDesmos-DgEbnzYS.js";import{T as x,S as d,P as N}from"./Stack-BQ7_Kc1W.js";import{R as Q,F as C,a as R}from"./RadioGroup-B_yYR8dg.js";import"./createSvgIcon-DzZIs_fK.js";const S={A200:"#b0bec5"},ee=["$A(x,y)$ สะท้อนข้าม แกน $x$: $$A'(x, -y)$$","$A(x,y)$ สะท้อนข้าม แกน $y$: $$A'(-x, y)$$","$A(x,y)$ สะท้อนข้าม แกน $y=a$: $$A'(x, 2a-y)$$","$A(x,y)$ สะท้อนข้าม แกน $x=a$: $$A'(2a-x, y)$$"],te=u.memo(()=>e.jsx(P,{sx:{paddingLeft:4,listStyleType:"disc"},children:ee.map((t,o)=>e.jsx(E,{sx:{display:"list-item"},children:e.jsx(_,{disableTypography:!0,children:e.jsx(x,{children:e.jsx(p,{dynamic:!0,children:t})})})},`forumla-${o}`))}),()=>!0),ne=["รูปต้นแบบและภาพที่ได้จากการสะท้อน สามารถทับกันได้สนิทโดยต้องพลิกรูปต้นแบบหรือพลิกภาพที่ได้จากการสะท้อนอย่างหนึ่งอย่างใด หรือกล่าวว่า รูปต้นแบบและภาพที่ได้จากการสะท้อนเท่ากันทุกประการ","จุดที่สมนัยกันแต่ละคู่จะอยู่ห่างจากเส้นสะท้อนเท่ากัน หรือเส้นสะท้อนจะแบ่งครึ่งและตั้งฉากกับส่วนของเส้นตรงทีเชื่อมระหว่างจุดที่สมนัยกันบนรูปต้นแบบและภาพที่ได้จากการสะท้อน","ส่วนของเส้นตรงที่เชื่อมระหว่างจุดที่สมนัยกันบนรูปต้นแบบและภาพที่ได้จากการสะท้อน จะขนานกัน"],re=u.memo(()=>e.jsx(d,{spacing:.5,children:e.jsx(P,{sx:{pl:4,listStyleType:"disc"},children:ne.map((t,o)=>e.jsx(E,{sx:{display:"list-item"},children:e.jsx(_,{disableTypography:!0,children:e.jsx(x,{children:t})})},`PROP-${o}`))})}),()=>!0),se=()=>{const{state:{value:t},handleChange:o,handleBlur:s}=G();return e.jsxs(Q,{value:t,onChange:(h,m)=>o(m),onBlur:s,children:[e.jsx(C,{value:"horizontal",control:e.jsx(R,{}),label:e.jsx(p,{dynamic:!0,children:"แนวแกน $x$"})}),e.jsx(C,{value:"vertical",control:e.jsx(R,{}),label:e.jsx(p,{dynamic:!0,children:"แนวแกน $y$"})}),e.jsx(C,{value:"linear",control:e.jsx(R,{}),label:"สมการเส้นตรง"})]})},j=c.string().trim().normalize().nonempty().refine(t=>!isNaN(Number(t))).pipe(c.transform(t=>Number(t))),I=c.discriminatedUnion("type",[c.object({type:c.literal("vertical"),value:j,points:c.object({x:j,y:j}).array().max(4).min(1)}),c.object({type:c.literal("horizontal"),value:j,points:c.object({x:j,y:j}).array().max(4).min(1)}),c.object({type:c.literal("linear"),value:c.string().trim().normalize().nonempty().refine(t=>t.split("=").length===2).pipe(c.transform(t=>t.split("="))),points:c.object({x:j,y:j}).array().max(4).min(1)})]),{useAppForm:ie}=H({fieldComponents:{NumberTextField:X,ArrayItemAddButton:V,ArrayItemRemoveButton:D,ReflectionEquationTypeInput:se},formComponents:{FormResetButton:q,FormSubmitButton:Z},fieldContext:M,formContext:Y}),le=({onSubmit:t})=>{const{setFieldValue:o,AppField:s,AppForm:h,FormResetButton:m,FormSubmitButton:y,Subscribe:g}=ie({defaultValues:{type:"horizontal",value:"0",points:[{x:"1",y:"1"}]},validators:{onChange:I},onSubmit:({value:n})=>{const r=I.safeParse(n);r.success&&t(r.data)}});return e.jsxs(d,{spacing:.5,children:[e.jsx(W,{children:e.jsx(h,{children:e.jsx(m,{})})}),e.jsxs(d,{children:[e.jsx(x,{children:"ประเภทของเส้นสะท้อน"}),e.jsx(s,{name:"type",listeners:{onChange:({value:n})=>{n==="linear"?o("value","y=x"):o("value","0")}},children:n=>e.jsx(n.ReflectionEquationTypeInput,{})})]}),e.jsx(g,{selector:({values:n})=>({values:n}),children:({values:n})=>e.jsxs(u.Fragment,{children:[n.type==="linear"&&e.jsxs(d,{padding:1,spacing:.5,sx:{backgroundColor:({palette:r})=>v(r.primary.main,.08)},children:[e.jsx(x,{children:"สมการเส้นสะท้อน"}),e.jsx(s,{name:"value",children:({state:r,handleBlur:a,handleChange:i})=>e.jsx(O,{fullWidth:!0,placeholder:"y=-x+2",error:r.meta.errors.length>0,value:r.value,onChange:l=>i(l.target.value),onBlur:a,slotProps:{input:{sx:{fontFamily:"monospace"}}}})})]}),n.type==="vertical"&&e.jsxs(d,{padding:1,spacing:.5,sx:{backgroundColor:({palette:r})=>v(r.primary.main,.08)},children:[e.jsx(x,{children:"เส้นสะท้อน (แนวตั้ง)"}),e.jsx(s,{name:"value",children:r=>e.jsx(r.NumberTextField,{})})]}),n.type==="horizontal"&&e.jsxs(d,{padding:1,spacing:.5,sx:{backgroundColor:({palette:r})=>v(r.primary.main,.08)},children:[e.jsx(x,{children:"เส้นสะท้อน (แนวนอน)"}),e.jsx(s,{name:"value",children:r=>e.jsx(r.NumberTextField,{})})]})]})}),e.jsx(d,{children:e.jsx(s,{name:"points",mode:"array",children:n=>e.jsx(u.Fragment,{children:n.state.value.map((r,a)=>e.jsxs(d,{spacing:.5,padding:1,sx:{backgroundColor:({palette:{primary:i}})=>a%2===0?void 0:v(i.light,.08)},children:[e.jsxs(d,{direction:"row",justifyContent:"space-between",children:[e.jsx(x,{children:e.jsxs(p,{children:[a===0&&`พิกัดที่ ${a+1} $(x,y)$`,a!==0&&`พิกัดที่ ${a+1}`]})}),e.jsx(n.ArrayItemRemoveButton,{index:a})]}),e.jsxs(d,{spacing:.5,direction:"row",children:[e.jsx(s,{name:`points[${a}].x`,children:i=>e.jsx(i.NumberTextField,{})}),e.jsx(s,{name:`points[${a}].y`,children:i=>e.jsx(i.NumberTextField,{})})]})]},`translate-point-${a}`))})})}),e.jsxs(W,{sx:{justifyContent:"space-between"},children:[e.jsx(h,{children:e.jsx(y,{})}),e.jsx(s,{name:"points",children:n=>e.jsx(n.ArrayItemAddButton,{})})]})]})},ae=t=>{const{clearGraph:o,desmosRef:s,addLine:h,addPoint:m,addPolygon:y}=U(t),g=u.useCallback((i,l)=>{i.setExpressions([{latex:`T(x,y) = ( 
          (2)(${l}) - x ,
          y
        )`,hidden:!0},{latex:`x=${l}`,color:S.A200,lines:!0,lineWidth:4}])},[]),n=u.useCallback((i,l)=>{i.setExpressions([{latex:`T(x,y) = (
          x , 
          (2)(${l}) - y
        )`,hidden:!0},{latex:`y=${l}`,color:S.A200,lines:!0,lineWidth:4}])},[]),r=u.useCallback((i,l)=>{const[f,b]=l;i.setExpressions([{latex:`G(x,y)=${f}-(${b})`,hidden:!0},{latex:"H_{x}(x) = G(x,0)",hidden:!0},{latex:"H_{y}(y) = G(0,y)",hidden:!0},{latex:"W = H_{x}'(0)",hidden:!0},{latex:"X = H_{y}'(0)",hidden:!0},{latex:"Y = G(0,0)",hidden:!0},{latex:"Z = W^{2} + X^{2}",hidden:!0},{latex:"T(u,v) = (u - 2W(Wu + Xv + Y)/Z , v - 2X(Wu + Xv + Y)/Z )",hidden:!0},{latex:`${f}=${b}`,color:S.A200,lines:!0,lineWidth:4}])},[]);return{plotReflection:u.useCallback(i=>{if(s.current===void 0)return;o();const{points:l,type:f,value:b}=i,A=s.current;switch(f){case"horizontal":n(A,b);break;case"linear":r(A,b);break;case"vertical":g(A,b);break}for(const[$,T]of l.entries()){const B=String.fromCharCode(65+$);h([`A_{${$}}`,`B_{${$}}`]),m({index:$,texName:"A",tex:`(${T.x},${T.y})`,label:B,color:k.A400}),m({index:$,texName:"B",tex:`T(
            (A_{${$}}).x, 
            (A_{${$}}).y   
          )`,label:`${B}\\prime`,color:L.A400})}l.length>1&&(y("A",l.length,k.A400),y("B",l.length,L.A400))},[s,h,m,y,o,n,r,g]),desmosRef:s}};function me(){const[t,o]=u.useState(null),{plotReflection:s,desmosRef:h}=ae("#desmos"),[m,y]=u.useState({});u.useEffect(()=>{if(h.current===void 0)return;const n=h.current;for(let r=0;r<4;r++){const a=n.HelperExpression({latex:`B_{${r}}`});a.observe("listValue",()=>{y(i=>{const l={...i};return l[r]=[...a.listValue],l})})}return()=>n.destroy()},[h]);const g=u.useCallback(n=>{o(n),s(n)},[s]);return e.jsx(J,{slots:{secondary:e.jsx(N,{sx:{height:"100%"},children:e.jsx("div",{id:"desmos",style:{width:"100%",height:"100%"}})}),primary:e.jsx(N,{sx:{height:"100%",padding:2,overflowY:"auto",scrollbarGutter:"stable",scrollbarWidth:"thin"},children:e.jsxs(d,{spacing:2,children:[e.jsx(x,{color:"textPrimary",sx:{"&:hover":{textDecorationLine:"underline"}},children:e.jsx(z,{to:"/",style:{color:"inherit",textDecorationLine:"none"},children:"กลับหน้าแรก"})}),e.jsxs(d,{spacing:.5,children:[e.jsx(x,{variant:"h5",component:"div",fontWeight:700,children:"(การแปลงทางเรขาคณิต)"}),e.jsx(x,{variant:"h5",component:"div",fontWeight:700,children:"การสะท้อน"})]}),e.jsx(le,{onSubmit:g}),e.jsx(F,{title:e.jsx(x,{fontWeight:800,children:"ผลลัพธ์"}),children:e.jsxs(d,{children:[t===null&&e.jsxs(e.Fragment,{children:[e.jsx(x,{children:"เส้นการสะท้อน:"}),e.jsx(p,{dynamic:!0,children:"พิกัดเดิม $\\rightarrow$ พิกัดใหม่:"})]}),t!==null&&e.jsxs(e.Fragment,{children:[t.type==="horizontal"&&e.jsx(p,{dynamic:!0,children:`เส้นการสะท้อน: $y=${t.value}$`}),t.type==="vertical"&&e.jsx(p,{dynamic:!0,children:`เส้นการสะท้อน: $x=${t.value}$`}),t.type==="linear"&&e.jsx(p,{dynamic:!0,children:`เส้นการสะท้อน: $${t.value.join("=")}$`}),e.jsx(p,{dynamic:!0,children:"พิกัดเดิม $\\rightarrow$ พิกัดใหม่:"}),e.jsx(K,{preImages:t.points,imageMap:m})]})]})}),e.jsx(F,{title:e.jsx(x,{fontWeight:600,children:"สมบัติการสะท้อน"}),children:e.jsx(re,{})}),e.jsx(F,{title:e.jsx(x,{fontWeight:600,children:"สูตรการสะท้อน"}),children:e.jsx(te,{})}),e.jsx(w,{})]})})}})}export{me as component};
